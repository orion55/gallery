(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{10:function(e,t,n){e.exports={app:"styles_app__eUpr-",app__input:"styles_app__input__1chJH",app__control_group:"styles_app__control_group__1jX3B",app__label:"styles_app__label__3ZnuJ",app__form:"styles_app__form__2RGCI",app__fieldset:"styles_app__fieldset__rlyfz"}},13:function(e,t,n){e.exports={card:"styles_card__sGdin",card__popup:"styles_card__popup__1y4v6",card__desc:"styles_card__desc__j5WLq",card__btnremove:"styles_card__btnremove__38Vb0",masonryItem:"styles_masonryItem__1BRNA",masonryContent:"styles_masonryContent__395PQ"}},23:function(e,t,n){e.exports={upbtn:"styles_upbtn__eRuLL","upbtn-hover":"styles_upbtn-hover__3HQji",abbbtn__wrap:"styles_abbbtn__wrap__2DabM",upbtn__text:"styles_upbtn__text__2-2wz",upbtn__icon:"styles_upbtn__icon__BjHN6"}},28:function(e,t,n){e.exports={gallery:"styles_gallery__H2-Pu",gallery__wrapper:"styles_gallery__wrapper__3poRE",masonry:"styles_masonry__3eY7H"}},29:function(e,t,n){e.exports={menu:"styles_menu__zhoqg",menu__item:"styles_menu__item__3BTMl",menu__icon:"styles_menu__icon__2HiG7"}},38:function(e,t,n){e.exports={loader:"styles_loader__zNilr",spin:"styles_spin__6bji-",loader__icon:"styles_loader__icon__84MlZ"}},55:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),c=n(24),o=n.n(c),i=(n(55),n(17)),l=n(19),u=n(4),_=n(49),p=n(47),d=n(14),m=n.n(d),j=n(10),b=n.n(j),f=n(11),v=n(12),h=n(23),O=n.n(h);var g=function(e){var t=e.onClick;return Object(a.jsx)("div",{className:O.a.upbtn__wrap,children:Object(a.jsxs)("button",{className:O.a.upbtn,onClick:t,children:[Object(a.jsx)(f.a,{icon:v.d,className:O.a.upbtn__icon,size:"1x"}),Object(a.jsx)("div",{className:O.a.upbtn__text,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})},y=(n(70),n(15)),x=n(45),N=n(46),w=n(43),I=new(function(){function e(){Object(x.a)(this,e)}return Object(N.a)(e,[{key:"save",value:function(e,t){var n=JSON.stringify(t);return localStorage.setItem(e,n),!0}},{key:"get",value:function(e){var t=localStorage.getItem(e);if(null===t)return!1;var n=!1;try{n=JSON.parse(t)}catch(a){console.error(a)}return n}},{key:"delete",value:function(e){localStorage.removeItem(e)}},{key:"addImage",value:function(e){var t="images",n=this.get(t)||[];n.push({id:w(),url:e,description:""}),this.save(t,n)}},{key:"getImages",value:function(){return this.get("images")}},{key:"saveImages",value:function(e){if(!e)return null;var t=e;return"id"in e[0]||(t=e.map((function(e){return Object(y.a)({id:w()},e)}))),this.save("images",t)}},{key:"deleteImages",value:function(){return this.delete("images")}},{key:"removeImage",value:function(e){var t="images",n=this.get(t);if(n){var a=n.filter((function(t){return t.id!==e}));0!==a.length?this.save(t,a):this.deleteImages()}}}]),e}()),k="/gallery";var S=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],s=t[1],c=Object(r.createRef)(),o=Object(u.f)(),i=function(e){setTimeout((function(){d.toastr.error("\u041e\u0448\u0438\u0431\u043a\u0430",e)}),0)},l=function(){s(""),c.current=null,o.push(k)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-left",getState:function(e){return e.toastr},transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0}),Object(a.jsx)("div",{className:b.a.app,children:Object(a.jsxs)("form",{className:b.a.app__form,children:[Object(a.jsxs)("fieldset",{className:b.a.app__fieldset,children:[Object(a.jsx)("div",{className:b.a.app__control_group,children:Object(a.jsxs)("label",{htmlFor:"url-input",className:b.a.app__label,children:["Url",Object(a.jsx)("input",{type:"text",id:"url-input",className:b.a.app__input,value:n,onChange:function(e){return s(e.target.value)}})]})}),Object(a.jsx)("div",{className:b.a.app__control_group,children:Object(a.jsxs)("label",{htmlFor:"json-input",className:b.a.app__label,children:["Json-\u0444\u0430\u0439\u043b",Object(a.jsx)("input",{type:"file",id:"json-input",className:b.a.app__input,ref:c,accept:".json"})]})})]}),Object(a.jsx)(g,{onClick:function(e){e.preventDefault();var t,a=c.current.files,r=a.length,s=Object(_.a)(a,["length"]);n||0!==r?(0!==r&&(t=s[0],new Promise((function(e,n){(t.size/1024/1024).toFixed(2)>1?n(new Error("\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c ".concat(1,"Mb"))):e(!0)}))).then((function(){return function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsText(e,"UTF-8"),a.onload=function(e){try{t(JSON.parse(e.target.result))}catch(a){n(new Error(a.toString()))}},a.onerror=function(){n(new Error(a.error))}}))}(s[0])})).then((function(e){return I.saveImages(e.images)})).then((function(){return l()})).catch((function(e){return i(e.toString())})),n&&function(e){return new Promise((function(t,n){/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g.test(e)?t(!0):n(new Error("\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439!"))}))}(n).then((function(){return I.addImage(n)})).then((function(){return l()})).catch((function(e){return i(e.toString())}))):i("\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b!")}})]})})]})},C=n(27),z=n(48),E=(n(43),Object(C.b)({name:"images",initialState:[],reducers:{add:function(e,t){return[].concat(Object(z.a)(e),[t.payload])},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))},load:function(e,t){return t.payload},clear:function(){return[]}}})),F=E.actions,J=(F.add,F.remove),R=F.load,T=F.clear,B=function(e){return e.images},D=E.reducer,H=Object(C.a)({reducer:{toastr:d.reducer,images:D}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(72);var P=n(28),M=n.n(P),G=n(38),L=n.n(G);var U=function(){return Object(a.jsx)("div",{className:L.a.loader,children:Object(a.jsx)(f.a,{icon:v.b,className:L.a.loader__icon,size:"2x"})})},W=n(13),q=n.n(W),A=n.p+"static/media/no-image.ac740afd.png";var Q=function(e){var t=e.url,n=e.description,r=e.onRemove;return t?Object(a.jsxs)("div",{className:"".concat(q.a.card," ").concat(q.a.masonryItem),children:[Object(a.jsx)("img",{src:t,className:q.a.masonryContent,alt:n,onError:function(e){e.target.src=A}}),Object(a.jsxs)("div",{className:q.a.card__popup,children:[n&&Object(a.jsx)("div",{className:q.a.card__desc,children:n}),Object(a.jsx)("button",{className:q.a.card__btnremove,onClick:r,children:Object(a.jsx)(f.a,{icon:v.c,className:q.a.card__icon,size:"1x"})})]})]}):null},Z=n(29),V=n.n(Z);var X=function(){var e=Object(u.f)();return Object(a.jsx)("div",{className:V.a.menu,children:Object(a.jsx)("button",{className:V.a.menu__item,onClick:function(){return e.push("/")},children:Object(a.jsx)(f.a,{icon:v.a,className:V.a.menu__icon,size:"1x"})})})};var Y=function(){var e=Object(u.f)(),t=Object(i.useSelector)(B),n=Object(i.useDispatch)();return Object(r.useEffect)((function(){var t=I.getImages();t||e.push("/"),n(T()),n(R(t))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-left",getState:function(e){return e.toastr},transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0}),t&&t.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X,{}),Object(a.jsx)("div",{className:M.a.gallery__wrapper,children:Object(a.jsx)("div",{className:"".concat(M.a.gallery," ").concat(M.a.masonry),children:t.map((function(e){return Object(r.createElement)(Q,Object(y.a)(Object(y.a)({},e),{},{key:e.id,onRemove:function(t){return function(e,t){e.preventDefault(),n(J(t)),I.removeImage(t)}(t,e.id)}}))}))})})]}):Object(a.jsx)(U,{})]})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(i.Provider,{store:H,children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/",component:S}),Object(a.jsx)(u.a,{exact:!0,path:k,component:Y})]})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[73,1,2]]]);
//# sourceMappingURL=main.b44cb606.chunk.js.map