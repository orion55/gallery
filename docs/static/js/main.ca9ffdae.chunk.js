(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{11:function(e,t,n){e.exports={app:"styles_app__eUpr-",app__input:"styles_app__input__1chJH",app__control_group:"styles_app__control_group__1jX3B",app__label:"styles_app__label__3ZnuJ",app__form:"styles_app__form__2RGCI",app__fieldset:"styles_app__fieldset__rlyfz"}},113:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(20),o=n.n(s),i=(n(66),n(15)),l=n(22),u=n(4),p=n(59),_=n(57),j=n(12),f=n.n(j),d=n(11),b=n.n(d),m=n(24),h=n(25),O=n(19),g=n.n(O);var v=function(e){var t=e.onClick;return Object(a.jsx)("div",{className:g.a.upbtn__wrap,children:Object(a.jsxs)("button",{className:g.a.upbtn,onClick:t,children:[Object(a.jsx)(m.a,{icon:h.b,className:g.a.upbtn__icon,size:"1x"}),Object(a.jsx)("div",{className:g.a.upbtn__text,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})},x=(n(81),n(51)),y=n(52),w=new(function(){function e(){Object(x.a)(this,e)}return Object(y.a)(e,[{key:"save",value:function(e,t){var n=JSON.stringify(t);return localStorage.setItem(e,n),!0}},{key:"get",value:function(e){var t=localStorage.getItem(e);if(null===t)return!1;var n=!1;try{n=JSON.parse(t)}catch(a){console.error(a)}return n}},{key:"delete",value:function(e){localStorage.removeItem(e)}},{key:"addImage",value:function(e){var t="images",n=this.get(t)||[];n.push({url:e,description:""}),this.save(t,n)}},{key:"getImages",value:function(){return this.get("images")}},{key:"saveImages",value:function(e){return this.save("images",e)}},{key:"deleteImages",value:function(){return this.delete("images")}}]),e}()),N=(n(34),n(53),n(54),"/gallery");var k=function(){var e=Object(r.useState)(""),t=Object(_.a)(e,2),n=t[0],c=t[1],s=Object(r.createRef)(),o=Object(u.f)(),i=function(e){setTimeout((function(){j.toastr.error("\u041e\u0448\u0438\u0431\u043a\u0430",e)}),0)},l=function(){c(""),s.current=null,o.push(N)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-left",getState:function(e){return e.toastr},transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0}),Object(a.jsx)("div",{className:b.a.app,children:Object(a.jsxs)("form",{className:b.a.app__form,children:[Object(a.jsxs)("fieldset",{className:b.a.app__fieldset,children:[Object(a.jsx)("div",{className:b.a.app__control_group,children:Object(a.jsxs)("label",{htmlFor:"url-input",className:b.a.app__label,children:["Url",Object(a.jsx)("input",{type:"text",id:"url-input",className:b.a.app__input,value:n,onChange:function(e){return c(e.target.value)}})]})}),Object(a.jsx)("div",{className:b.a.app__control_group,children:Object(a.jsxs)("label",{htmlFor:"json-input",className:b.a.app__label,children:["Json-\u0444\u0430\u0439\u043b",Object(a.jsx)("input",{type:"file",id:"json-input",className:b.a.app__input,ref:s,accept:".json"})]})})]}),Object(a.jsx)(v,{onClick:function(e){e.preventDefault();var t,a=s.current.files,r=a.length,c=Object(p.a)(a,["length"]);n||0!==r?(0!==r&&(t=c[0],new Promise((function(e,n){(t.size/1024/1024).toFixed(2)>1?n(new Error("\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c ".concat(1,"Mb"))):e(!0)}))).then((function(){return function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsText(e,"UTF-8"),a.onload=function(e){try{t(JSON.parse(e.target.result))}catch(a){n(new Error(a.toString()))}},a.onerror=function(){n(new Error(a.error))}}))}(c[0])})).then((function(e){return w.saveImages(e.images)})).then((function(){return l()})).catch((function(e){return i(e.toString())})),n&&function(e){return new Promise((function(t,n){/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g.test(e)?t(!0):n(new Error("\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439!"))}))}(n).then((function(){return w.addImage(n)})).then((function(){return l()})).catch((function(e){return i(e.toString())}))):i("\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b!")}})]})})]})},I=n(26),S=n(60),J=n(58),C=n(55),F=n.n(C),T=Object(I.b)({name:"images",initialState:[],reducers:{add:function(e,t){return[].concat(Object(J.a)(e),[t.payload])},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))},load:function(e,t){return t.payload},clear:function(){return[]}}}),z=T.actions,E=(z.add,z.remove,z.load),D=(z.clear,function(e){return e.images}),P=T.reducer,B=Object(I.a)({reducer:{toastr:j.reducer,images:P}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(112);var H=n(56),M=n.n(H),R=n(37),U=n.n(R);var L=function(){return Object(a.jsx)("div",{className:U.a.loader,children:Object(a.jsx)(m.a,{icon:h.a,className:U.a.loader__icon,size:"2x"})})};var W=function(){var e=Object(u.f)(),t=Object(i.useSelector)(D),n=Object(i.useDispatch)();return Object(r.useEffect)((function(){var t=w.getImages();t||e.push("/"),n(function(e){return function(t){t(E(e.map((function(e){return Object(S.a)({id:F()()},e)}))))}}(t))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-left",getState:function(e){return e.toastr},transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0}),t&&t.length>0?Object(a.jsx)("div",{className:M.a.gallery,children:Object(a.jsx)("h1",{children:"\u041f\u0440\u0438\u0432\u0435\u0442 \u043c\u0438\u0440!"})}):Object(a.jsx)(L,{})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.Provider,{store:B,children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/",component:k}),Object(a.jsx)(u.a,{exact:!0,path:N,component:W})]})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},19:function(e,t,n){e.exports={upbtn:"styles_upbtn__eRuLL","upbtn-hover":"styles_upbtn-hover__3HQji",abbbtn__wrap:"styles_abbbtn__wrap__2DabM",upbtn__text:"styles_upbtn__text__2-2wz",upbtn__icon:"styles_upbtn__icon__BjHN6"}},37:function(e,t,n){e.exports={loader:"styles_loader__zNilr",spin:"styles_spin__6bji-",loader__icon:"styles_loader__icon__84MlZ"}},56:function(e,t,n){e.exports={gallery:"styles_gallery__H2-Pu"}},66:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.ca9ffdae.chunk.js.map